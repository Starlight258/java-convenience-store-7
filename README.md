# 편의점

## 기능 목록

### 1. 상품 정보 관리

- 파일 입출력을 통한 상품/프로모션 목록 로드
- 상품 정보 표시
    - 상품명, 가격, 재고, 프로모션 표시
    - 재고 0개인 상품은 '재고 없음' 표시
- 재고 관리
    - 프로모션/일반 재고 분리 관리
    - 구매 시 자동 재고 차감
    - 실시간 재고 상태 유지

### 2. 상품 구매 시스템

- 구매 입력 처리
    - [상품명-수량] 형식으로 입력
    - 복수 상품 동시 구매 가능
    - 수량 0개 구매 제한
- 프로모션 구매 안내
    - 추가 구매 시 혜택 안내
    - 정가 구매 여부 확인

### 3. 결제 시스템

- 재고 기반 결제 처리
    - 프로모션 재고 우선 사용
    - 일반 재고 차선 사용
- Buy N Get 1 Free 프로모션
    - 1+1 또는 2+1 프로모션
    - 프로모션 기간 확인
    - 재고 내 프로모션 적용

### 4. 멤버십 할인

- 할인 적용 여부 입력
- 할인 정책
    - 프로모션 미적용 금액의 30% 할인
    - 최대 할인 한도 8,000원
    - 프로모션 후 잔여 금액에 적용

### 5. 영수증 출력

- 구매 내역 출력
    - 상품명, 수량, 금액
    - 증정 상품 목록
- 금액 정보 출력
    - 총구매액
    - 행사할인
    - 멤버십할인
    - 최종 결제금액
- 보기 좋은 정렬과 포맷팅

### 6. 추가 구매 처리

- 추가 구매 여부 확인
- 재고 업데이트 후 반복 또는 종료

## 예외 처리

### 입력 검증 예외

| 예외 유형  | 에러 메시지                                      | 설명              |
|--------|---------------------------------------------|-----------------|
| 잘못된 입력 | [ERROR] 잘못된 입력입니다. 다시 입력해 주세요.              | 기본적인 입력 오류      |
| 형식 오류  | [ERROR] 올바르지 않은 형식으로 입력했습니다. 다시 입력해 주세요.    | 입력 형식이 맞지 않음    |
| 상품 없음  | [ERROR] 존재하지 않는 상품입니다. 다시 입력해 주세요.          | 입력한 상품이 존재하지 않음 |
| 재고 부족  | [ERROR] 재고 수량을 초과하여 구매할 수 없습니다. 다시 입력해 주세요. | 요청 수량이 재고보다 많음  |

### 데이터 유효성 예외

| 예외 유형 | 에러 메시지                      | 설명             |
|-------|-----------------------------|----------------|
| 가격 형식 | [ERROR] 가격은 숫자로만 이루어져야 합니다. | 가격에 숫자 외 문자 포함 |
| 가격 음수 | [ERROR] 가격은 음수일 수 없습니다.     | 가격이 음수인 경우     |
| 수량 음수 | [ERROR] 수량은 음수일 수 없습니다.     | 수량이 음수인 경우     |
| 숫자 변환 | [ERROR] 정수로 변환할 수 없습니다.     | 문자열을 정수로 변환 실패 |

### 시스템 예외

| 예외 유형    | 에러 메시지                            | 설명               |
|----------|-----------------------------------|------------------|
| 파일 형식 오류 | [ERROR] 파일 형식이 잘못되었습니다.           | 상품/프로모션 파일 형식 오류 |
| Null 값   | [ERROR] 인자 값은 null일 수 없습니다.       | null 값 입력        |
| 빈 값      | [ERROR] 인자 값은 null이거나 비어있을 수 없습니다 | null 또는 빈 컬렉션    |
| 공백 값     | [ERROR] 인자 값은 null이거나 공백일 수 없습니다  | null 또는 공백 문자열   |

### 프로모션 예외

| 예외 유형   | 에러 메시지                           | 설명               |
|---------|----------------------------------|------------------|
| 날짜 오류   | [ERROR] 시작 날짜는 이후 날짜 이전일 수 없습니다. | 프로모션 시작일이 종료일 이후 |
| 프로모션 없음 | [ERROR] 프로모션이 없는 상품을 찾을 수 없습니다.  | 프로모션 상품 조회 실패    |
| 구매 불가   | [ERROR] 상품을 구매할 수 없습니다.          | 기타 구매 불가 상황      |

## 입력 형식

### 상품 구매

```
[상품명-수량],[상품명-수량]
예: [사이다-2],[감자칩-1]
```

### 프로모션/멤버십 선택

- 추가 구매 여부: Y/N
- 정가 구매 여부: Y/N
- 멤버십 할인 적용: Y/N

## 파일 구조

- `src/main/resources/products.md`: 상품 목록
- `src/main/resources/promotions.md`: 프로모션 목록

## 추가 요구사항

- 모든 에러는 `[ERROR]` 접두어로 시작
- 에러 발생 시 해당 단계부터 재입력
- 영수증은 구매 순서대로 출력
- 프로모션과 멤버십 할인은 중복 적용 가능
- 모든 입력값은 null, 공백, 빈 값 검증 수행
- 가격과 수량은 항상 0 이상의 정수여야 함
