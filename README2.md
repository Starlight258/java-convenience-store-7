# 기능 목록
## 보유 상품 출력
- [ ] 보유 상품 출력
- [ ] 파일 입력
    - `src/main/resources/products.md`과 `src/main/resources/promotions.md` 파일을 이용한다.
    - 두 파일 모두 내용의 형식을 유지한다면 값은 수정할 수 있다.
- [ ] 환영 인사와 함께 상품명, 가격, 프로모션 이름, 재고를 안내한다.
    - 만약 재고가 0개라면 `재고 없음`을 출력한다.
    - 프로모션 O → 프로모션 X 순서
        - 프로모션이 없는 것도 있음
    - 가나다 순 X, 파일 저장 순서
        - 파일에 프로모션만 있으면 일반 재고는 재고 없음으로 표시

```json
안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 10개 탄산2+1
- 콜라 1,000원 10개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
- 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
- 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
- 물 500원 10개
- 비타민워터 1,500원 6개
- 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
- 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
- 에너지바 2,000원 5개
- 정식도시락 6,400원 8개
- 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
```

## 구매 상품, 수량 입력
- [ ] 구매 상품명, 수량 입력
    - [ ] `[콜라-10],[사이다-3]`
- [ ] 예외
    - [ ] 주문 형식이 아닐때
    - [ ] 상품명
        - [ ] 형식
        - [ ] 존재하지 않은 상품명
        - [ ] 중복된 상품명
    - [ ] 수량
        - [ ] 숫자 형식이 아닐때
        - [ ] 0 이하일때
        - [ ] 재고보다 구매 수량이 많을때
- 예외 메세지
    -  `Exception`이 아닌 `IllegalArgumentException`, `IllegalStateException` 등과 같은 명확한 유형을 처리한다.
    - 구매할 상품과 수량 형식이 올바르지 않은 경우: `[ERROR] 올바르지 않은 형식으로 입력했습니다. 다시 입력해 주세요.`
    - 존재하지 않는 상품을 입력한 경우: `[ERROR] 존재하지 않는 상품입니다. 다시 입력해 주세요.`
    - 구매 수량이 재고 수량을 초과한 경우: `[ERROR] 재고 수량을 초과하여 구매할 수 없습니다. 다시 입력해 주세요.`
    - 기타 잘못된 입력의 경우: `[ERROR] 잘못된 입력입니다. 다시 입력해 주세요.`

## 멤버십 할인 여부 입력
- [ ] 멤버십 할인 여부 입력
- [ ] 예외
    - [ ] Y 또는 N 문자가 아닐때

## 영수증 출력
- [ ] 프로모션, 멤버십 계산
- [ ] 영수증 출력

### 결제 시스템

- 구매자의 할인 혜택과 재고 상황을 고려
- 최종 결제 금액 : 사용자가 입력한 상품의 가격과 수량을 기반
    - 총구매액 : 상품별 가격 * 수량
    - 최종 결제 금액은 총 구매액에 프로모션, 멤버십 할인 정책 반영

### 영수증

- 구매 내역과 산출한 금액 정보
- 영수증 출력 후 추가 구매를 진행할지 또는 종료할지를 선택할 수 있다.

### 재고 관리

- 각 상품의 재고 수량을 고려 → 결제 가능 여부 확인
    - 고객이 상품을 구매할 때마다, 결제된 수량만큼 해당 상품의 재고에서 차감

### 프로모션 할인

- 오늘 날짜가 프로모션 기간 내에 포함된 경우에만 할인을 적용
- N개 구매 시 1개 무료 증정(Buy N Get 1 Free)의 형태
    - 1+1 또는 2+1 프로모션
    - **동일 상품에 여러 프로모션이 적용되지 않는다.**
- 프로모션 재고 내에서만 적용된다.
    - 프로모션 기간 중이라면 프로모션 재고를 우선적으로 차감하며, 프로모션 재고가 부족할 경우에는 일반 재고를 사용한다.
    - ex ) 2+1 프로모션 : 프로모션 재고가 8개이고 일반 재고가 충분할 경우 프로모션 적용은 6개만 된다.
- 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량보다 적게 가져온 경우, 필요한 수량을 추가로 가져오면 혜택을 받을 수 있음을 안내한다.
    - ex) 1+1 프로모션 : 1개를 가져온 경우 1개를 안내한다.
        - 3개를 가져온 경우 1개를 안내한다.
    - ex) 2+1 프로모션 : 2개를 가져온 경우 1개를 안내한다.
        - 5개를 가져온 경우 1개를 안내한다. (5-3 == 2 → 1개 증정)
        - 8개 (8-3*2==2 → 1개 증정)
        - `n % (buy+get) == buy`

```json
현재 {상품명}은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
```

- 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제하게 됨을 안내한다.
    - ex ) 1+1 프로모션 : 프로모션 재고 5, 일반 재고 충분할 경우, 6개 구매시 2개는 정가로 결제해야함을 안내한다. `(6- (5 / 2 **2)`*
    - ex ) 2+1 프로모션 : 프로모션 재고 5, 일반 재고 충분할 경우, 6개 구매시 3개는 정가로 결제해야함을 안내한다. 6-5/3*3 → 3
    - `(구매할 수량 - (프로모션 재고 /(buy+get)(buy*get)`
    - 10 - 7/3*3 = 4

```json
현재 {상품명} {수량}개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)
```

### 멤버십 할인

- [ ] 프로모션 미적용 금액의 **30%**를 할인
    - 프**로모션 적용 후 남은 금액**에 대해 **멤버십 할인을 적용**
- [ ] 멤버십 할인의 최대 한도는 **8,000원**

```json
멤버십 할인을 받으시겠습니까? (Y/N)
```

### 영수증

- 고객의 구매 내역과 할인을 요약
- 영수증 항목
    - 구매 상품 내역: 구매한 상품명, 수량, 가격
        - 구매 수량 + 증정 수량
    - 증정 상품 내역: 프로모션에 따라 무료로 제공된 증정 상품의 목록
        - 증정 수량
    - 금액 정보
        - 총구매액: 구매한 상품의 총 수량과 총 금액
        - 행사할인: **프로모션**에 의해 할인된 금액
            - 증정품 금액
        - 멤버십할인: **멤버십**에 의해 추가로 할인된 금액
            - 프로모션 미적용 금액 30%
            - 정가로 결제 : 프로모션 미적용에 포함
        - 내실돈: **최종 결제 금액**
            - 총구매액 - 행사할인 - 멤버십할인

```json
==============W 편의점================
상품명		수량	금액
콜라		3 	3,000
에너지바 		5 	10,000
=============증	정===============
콜라		1
====================================
총구매액		8	13,000
행사할인			-1,000
멤버십할인			-3,000
내실돈			 9,000
```


## 재입력
- [ ] 재입력 여부 입력
- [ ] Y 시 결제 재시도 수행
    - [ ] 재고 초기화 X
- [ ] N 시 종료
- [ ] 예외
    - [ ] Y또는 N 문자가 아닐 경우

### 재입력
- 사용자가 잘못된 값을 입력할 경우 `IllegalArgumentException`를 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.
```json
감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
```
